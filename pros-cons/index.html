<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>찬반 분석(Pros-Cons) 도구 | 파란랩</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6902579674102145" crossorigin="anonymous"></script>
</head>
<body class="bg-gray-50">
    <div id="header-root"></div>
    <div id="root"></div>
    <div id="footer-root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function ProsConsApp() {
            const [topic, setTopic] = useState('');
            const [pros, setPros] = useState(['']);
            const [cons, setCons] = useState(['']);
            const [showResult, setShowResult] = useState(false);

            useEffect(() => {
                const tossedData = localStorage.getItem('paranlab-pros-cons');
                if (tossedData) {
                    const data = JSON.parse(tossedData);
                    setTopic(data.topic || '');
                    setPros(data.pros || ['']);
                    setCons(data.cons || ['']);
                    setShowResult(true);
                    localStorage.removeItem('paranlab-pros-cons'); // 사용 후 삭제
                }
            }, []);

            const handleAnalyze = () => setShowResult(true);

            return (
                <main class="container mx-auto px-4 py-10 max-w-4xl">
                    {!showResult ? (
                        <section class="bg-white p-8 rounded-xl shadow-lg">
                            <h1 class="text-3xl font-bold mb-6 text-blue-600">찬반 분석 (Pros-Cons)</h1>
                            <div class="mb-6">
                                <label class="block text-sm font-semibold mb-2">의사결정 주제</label>
                                <input type="text" value={topic} onChange={(e)=>setTopic(e.target.value)} class="w-full p-3 border rounded" placeholder="예: 이직을 해야 할까?" />
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <h3 class="font-bold text-green-600 mb-2">장점 (Pros)</h3>
                                    {pros.map((p, i) => (
                                        <input key={i} value={p} onChange={(e)=>{
                                            const newPros = [...pros]; newPros[i] = e.target.value; setPros(newPros);
                                        }} class="w-full p-2 border rounded mb-2" placeholder="장점 입력" />
                                    ))}
                                    <button onClick={()=>setPros([...pros, ''])} class="text-sm text-blue-500">+ 항목 추가</button>
                                </div>
                                <div>
                                    <h3 class="font-bold text-red-600 mb-2">단점 (Cons)</h3>
                                    {cons.map((c, i) => (
                                        <input key={i} value={c} onChange={(e)=>{
                                            const newCons = [...cons]; newCons[i] = e.target.value; setCons(newCons);
                                        }} class="w-full p-2 border rounded mb-2" placeholder="단점 입력" />
                                    ))}
                                    <button onClick={()=>setCons([...cons, ''])} class="text-sm text-blue-500">+ 항목 추가</button>
                                </div>
                            </div>
                            <button onClick={handleAnalyze} class="w-full mt-8 bg-blue-600 text-white py-4 rounded-lg font-bold text-xl">분석 리포트 생성</button>
                        </section>
                    ) : (
                        <section>
                            <div id="report-area" class="bg-white p-10 rounded-xl shadow-lg border-t-8 border-blue-600">
                                <h2 class="text-2xl font-bold mb-2">의사결정 리포트: {topic}</h2>
                                <p class="text-gray-500 mb-8 text-sm">분석 일시: {new Date().toLocaleString()}</p>
                                <div class="grid grid-cols-2 gap-8">
                                    <div class="bg-green-50 p-6 rounded-lg">
                                        <h3 class="text-xl font-bold text-green-700 mb-4">PROS</h3>
                                        <ul class="list-disc pl-5 space-y-2">
                                            {pros.filter(p => p).map((p, i) => <li key={i}>{p}</li>)}
                                        </ul>
                                    </div>
                                    <div class="bg-red-50 p-6 rounded-lg">
                                        <h3 class="text-xl font-bold text-red-700 mb-4">CONS</h3>
                                        <ul class="list-disc pl-5 space-y-2">
                                            {cons.filter(c => c).map((c, i) => <li key={i}>{c}</li>)}
                                        </ul>
                                    </div>
                                </div>
                                <div class="mt-10 p-6 bg-blue-50 rounded-lg italic text-center text-blue-800">
                                    "가장 좋은 결정은 장점의 무게가 단점의 두려움을 압도할 때 내려집니다."
                                </div>
                            </div>
                            <div id="action-buttons"></div>
                        </section>
                    )}

                    <article class="mt-20 prose max-w-none border-t pt-10">
                        <h2 class="text-2xl font-bold">찬반 분석(Pros-Cons)의 과학적 근거</h2>
                        <p>찬반 분석은 벤자민 프랭클린(Benjamin Franklin)이 사용한 '도덕적 대수학(Moral Algebra)'에 뿌리를 두고 있습니다. 인간의 뇌는 한 번에 7개 이상의 정보를 처리하기 어렵기 때문에, 복잡한 선택지를 시각화하여 나열하는 것만으로도 인지적 부하를 줄이고 객관적인 판단을 내릴 수 있습니다.</p>
                        <h3>활용 팁</h3>
                        <ul>
                            <li>각 항목에 1~5점의 가중치를 부여하여 합산해보세요.</li>
                            <li>단점 항목 중 해결 가능한 대안이 있는지 검토하세요.</li>
                        </ul>
                    </article>
                </main>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ProsConsApp />);

        // 결과 버튼 주입 로직
        window.addEventListener('load', () => {
            const checkBtn = setInterval(() => {
                const area = document.getElementById('action-buttons');
                if (area && typeof ParanLabCore !== 'undefined') {
                    area.appendChild(ParanLabCore.renderActionButtons('report-area'));
                    clearInterval(checkBtn);
                }
            }, 500);
        });
    </script>
    <script src="/core.js"></script>
</body>
</html>
