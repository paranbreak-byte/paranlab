<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¸ìƒì˜ ìˆ˜ë ˆë°”í€´ ì ê²€ | íŒŒë€ë©</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/core.js" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;900&display=swap');
        body { font-family: 'Pretendard', sans-serif; }
        .radar-grid { stroke: #e2e8f0; stroke-width: 1; fill: none; }
        .radar-line { stroke: #2563eb; stroke-width: 3; fill: rgba(37, 99, 235, 0.2); transition: all 0.5s ease; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root">
        <div id="wheel-app" class="max-w-2xl mx-auto py-10 px-4"></div>
    </div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        function WheelApp() {
            const [step, setStep] = useState(1); // 1: ì ìˆ˜ì…ë ¥, 2: ê²°ê³¼í™•ì¸
            const [scores, setScores] = useState({
                "ê±´ê°•": 5, "ì»¤ë¦¬ì–´": 5, "ì¬ì •": 5, "ê´€ê³„": 5,
                "ì¦ê±°ì›€": 5, "ì„±ì¥": 5, "í™˜ê²½": 5, "ì •ì‹ ": 5
            });

            const categories = Object.keys(scores);

            const updateScore = (cat, val) => {
                setScores({ ...scores, [cat]: parseInt(val) });
            };

            // ë ˆì´ë” ì°¨íŠ¸ ì¢Œí‘œ ê³„ì‚°
            const points = useMemo(() => {
                const center = 150;
                const radius = 120;
                return categories.map((cat, i) => {
                    const angle = (Math.PI * 2 * i) / categories.length - Math.PI / 2;
                    const score = scores[cat];
                    const x = center + radius * (score / 10) * Math.cos(angle);
                    const y = center + radius * (score / 10) * Math.sin(angle);
                    return `${x},${y}`;
                }).join(" ");
            }, [scores]);

            const saveAsHtml = () => {
                const htmlContent = `
                    <!DOCTYPE html>
                    <html>
                    <head><meta charset="UTF-8"><title>ì¸ìƒì˜ ìˆ˜ë ˆë°”í€´ ë³´ê³ ì„œ</title><style>body{font-family:sans-serif;padding:40px;text-align:center;} .box{padding:15px; border-bottom:1px solid #eee; text-align:left;}</style></head>
                    <body>
                        <h1>ğŸ¡ ì¸ìƒì˜ ìˆ˜ë ˆë°”í€´ ì ê²€ ë³´ê³ ì„œ</h1>
                        <div style="margin:30px 0;">
                            ${categories.map(cat => `<div class="box"><strong>${cat}:</strong> ${scores[cat]}ì </div>`).join('')}
                        </div>
                        <p>Â© 2025 Paran Lab. í˜„ëª…í•œ ì‚¶ì„ ì‘ì›í•©ë‹ˆë‹¤.</p>
                    </body>
                    </html>
                `;
                const blob = new Blob([htmlContent], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `wheel_of_life_${new Date().getTime()}.html`;
                a.click();
            };

            const copyToClipboard = () => {
                const text = `[íŒŒë€ë© ì¸ìƒì˜ ìˆ˜ë ˆë°”í€´ ë³´ê³ ì„œ]\n\n` +
                    categories.map(cat => `${cat}: ${scores[cat]}ì `).join('\n') +
                    `\n\në‚´ ì‚¶ì˜ ê· í˜•ì„ ì ê²€í•´ë³´ì„¸ìš”. íŒŒë€ë©(paranlab.com)`;
                navigator.clipboard.writeText(text).then(() => alert("ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!"));
            };

            return (
                <div className="animate-in fade-in duration-500">
                    {step === 1 && (
                        <div className="bg-white p-8 rounded-[3rem] shadow-2xl border border-slate-100">
                            <h2 className="text-3xl font-black text-slate-900 mb-2">ì¸ìƒì˜ ìˆ˜ë ˆë°”í€´</h2>
                            <p className="text-slate-500 mb-10 font-medium">ê° ì˜ì—­ë³„ë¡œ í˜„ì¬ ë‚˜ì˜ ë§Œì¡±ë„ë¥¼ 10ì  ë§Œì ìœ¼ë¡œ í‘œì‹œí•˜ì„¸ìš”.</p>
                            
                            <div className="space-y-8 mb-10">
                                {categories.map(cat => (
                                    <div key={cat} className="flex flex-col gap-2">
                                        <div className="flex justify-between items-center">
                                            <span className="font-black text-slate-700">{cat}</span>
                                            <span className="text-blue-600 font-black">{scores[cat]}ì </span>
                                        </div>
                                        <input 
                                            type="range" min="1" max="10" value={scores[cat]} 
                                            onChange={(e)=>updateScore(cat, e.target.value)}
                                            className="w-full h-2 bg-slate-100 rounded-lg appearance-none cursor-pointer accent-blue-600"
                                        />
                                    </div>
                                ))}
                            </div>
                            
                            <button onClick={()=>setStep(2)} className="w-full py-6 bg-blue-600 text-white rounded-[2rem] font-black text-xl shadow-xl shadow-blue-200">ê²°ê³¼ ê·¸ë˜í”„ ë³´ê¸°</button>
                        </div>
                    )}

                    {step === 2 && (
                        <div className="bg-white p-8 rounded-[3rem] shadow-2xl border border-slate-100 text-center">
                            <h2 className="text-3xl font-black text-slate-900 mb-8">ë‚˜ì˜ ì¸ìƒ ë°¸ëŸ°ìŠ¤</h2>
                            
                            {/* SVG ë ˆì´ë” ì°¨íŠ¸ */}
                            <div className="flex justify-center mb-10">
                                <svg width="300" height="300" viewBox="0 0 300 300">
                                    {/* ë°°ê²½ ê·¸ë¦¬ë“œ (ì›í˜•) */}
                                    {[2, 4, 6, 8, 10].map(r => (
                                        <circle key={r} cx="150" cy="150" r={(120 * r) / 10} className="radar-grid" />
                                    ))}
                                    {/* ì¶• ë¼ì¸ */}
                                    {categories.map((_, i) => {
                                        const angle = (Math.PI * 2 * i) / categories.length - Math.PI / 2;
                                        return <line key={i} x1="150" y1="150" x2={150 + 120 * Math.cos(angle)} y2={150 + 120 * Math.sin(angle)} className="radar-grid" />;
                                    })}
                                    {/* ë°ì´í„° í´ë¦¬ê³¤ */}
                                    <polygon points={points} className="radar-line" />
                                    {/* ë¼ë²¨ */}
                                    {categories.map((cat, i) => {
                                        const angle = (Math.PI * 2 * i) / categories.length - Math.PI / 2;
                                        const x = 150 + 140 * Math.cos(angle);
                                        const y = 150 + 140 * Math.sin(angle);
                                        return <text key={cat} x={x} y={y} textAnchor="middle" className="text-[10px] font-black fill-slate-400">{cat}</text>;
                                    })}
                                </svg>
                            </div>

                            <div className="p-6 bg-blue-50 rounded-2xl mb-10 text-left">
                                <h4 className="font-black text-blue-900 mb-2">ğŸ’¡ ë¶„ì„ ê°€ì´ë“œ</h4>
                                <p className="text-sm text-blue-700 leading-relaxed">
                                    ê·¸ë˜í”„ê°€ ì›í˜•ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ê· í˜• ì¡íŒ ì‚¶ì„ ì‚´ê³  ê³„ì‹œêµ°ìš”! <br/>
                                    <strong>ê°€ì¥ ì›€í‘¹ ë“¤ì–´ê°„ ì˜ì—­</strong>ì´ ìˆë‹¤ë©´, ì´ë²ˆ ë‹¬ì—ëŠ” ê·¸ ë¶€ë¶„ì— ì¡°ê¸ˆ ë” ì§‘ì¤‘í•´ë³´ëŠ” ê±´ ì–´ë–¨ê¹Œìš”?
                                </p>
                            </div>

                            <div className="grid grid-cols-1 gap-4">
                                <button onClick={saveAsHtml} className="py-6 bg-slate-900 text-white rounded-[2rem] font-black text-xl shadow-xl">ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ (.html)</button>
                                <button onClick={copyToClipboard} className="py-6 bg-blue-600 text-white rounded-[2rem] font-black text-xl shadow-xl">í…ìŠ¤íŠ¸ ê²°ê³¼ ë³µì‚¬í•˜ê¸°</button>
                                <button onClick={()=>setStep(1)} className="py-6 bg-slate-100 text-slate-400 rounded-[2rem] font-black text-xl">ë‹¤ì‹œ ìˆ˜ì •í•˜ê¸°</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('wheel-app')).render(<WheelApp />);
    </script>
</body>
</html>
