<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¡°í•˜ë¦¬ì˜ ì°½ ìê¸°ë¶„ì„ | íŒŒë€ë©</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/core.js" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;900&display=swap');
        body { font-family: 'Pretendard', sans-serif; }
        .johari-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root">
        <div id="johari-app" class="max-w-4xl mx-auto py-10 px-4"></div>
    </div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        function JohariApp() {
            const [step, setStep] = useState(1); // 1: ì„±ê²© í‚¤ì›Œë“œ ì„ íƒ, 2: ê²°ê³¼
            const [selectedSelf, setSelectedSelf] = useState([]); // ë‚´ê°€ ìƒê°í•˜ëŠ” ë‚˜
            const [selectedOthers, setSelectedOthers] = useState([]); // ë‚¨ì´ ë§í•´ì¤€ ë‚˜

            const traits = [
                "ì¹œì ˆí•œ", "ìì‹ ê° ìˆëŠ”", "ì°¨ë¶„í•œ", "ë˜‘ë˜‘í•œ", "ë³µì¡í•œ", "ë¯¿ìŒì§í•œ", 
                "í™œë°œí•œ", "ë™ì •ì‹¬ ë§ì€", "ì ì‘ë ¥ ìˆëŠ”", "ëŒ€ë‹´í•œ", "ë…ë¦½ì ì¸", "ìˆ˜ì¤ì€",
                "ì„±ìˆ™í•œ", "í–‰ë³µí•œ", "ì¸ë‚´ì‹¬ ìˆëŠ”", "ì¢…êµì ì¸", "ë°˜ì‘ì´ ë¹ ë¥¸", "ìë‘ìŠ¤ëŸ¬ìš´",
                "ê´€ëŒ€í•œ", "ë…¼ë¦¬ì ì¸", "ì¡°ìš©í•œ", "ìœ ëŠ¥í•œ", "ë”°ëœ»í•œ", "ê²¸ì†í•œ"
            ];

            const toggleSelf = (t) => {
                if (selectedSelf.includes(t)) setSelectedSelf(selectedSelf.filter(item => item !== t));
                else setSelectedSelf([...selectedSelf, t]);
            };

            const toggleOthers = (t) => {
                if (selectedOthers.includes(t)) setSelectedOthers(selectedOthers.filter(item => item !== t));
                else setSelectedOthers([...selectedOthers, t]);
            };

            const windows = useMemo(() => {
                return {
                    open: selectedSelf.filter(t => selectedOthers.includes(t)), // ë‘˜ ë‹¤ ì•„ëŠ” ê²ƒ
                    blind: selectedOthers.filter(t => !selectedSelf.includes(t)), // ë‚¨ë§Œ ì•„ëŠ” ê²ƒ
                    hidden: selectedSelf.filter(t => !selectedOthers.includes(t)), // ë‚˜ë§Œ ì•„ëŠ” ê²ƒ
                    unknown: traits.filter(t => !selectedSelf.includes(t) && !selectedOthers.includes(t)) // ë‘˜ ë‹¤ ëª¨ë¥´ëŠ” ê²ƒ
                };
            }, [selectedSelf, selectedOthers]);

            const saveAsHtml = () => {
                const htmlContent = `
                    <!DOCTYPE html>
                    <html>
                    <head><meta charset="UTF-8"><title>ì¡°í•˜ë¦¬ì˜ ì°½ ë³´ê³ ì„œ</title><style>body{font-family:sans-serif;padding:40px;max-width:700px;margin:0 auto;}h1{border-bottom:4px solid #2563eb;padding-bottom:10px;}.grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;}.box{padding:20px;border-radius:15px;border:1px solid #eee;min-height:100px;}</style></head>
                    <body>
                        <h1>ğŸªŸ ì¡°í•˜ë¦¬ì˜ ì°½ ìê¸°ë¶„ì„ ë³´ê³ ì„œ</h1>
                        <div class="grid">
                            <div class="box" style="background:#eff6ff;"><h3>1. ì—´ë¦° ì°½ (Open)</h3>${windows.open.join(', ') || 'ì—†ìŒ'}</div>
                            <div class="box" style="background:#fef2f2;"><h3>2. ëˆˆë¨¼ ì°½ (Blind)</h3>${windows.blind.join(', ') || 'ì—†ìŒ'}</div>
                            <div class="box" style="background:#f0fdf4;"><h3>3. ìˆ¨ê²¨ì§„ ì°½ (Hidden)</h3>${windows.hidden.join(', ') || 'ì—†ìŒ'}</div>
                            <div class="box" style="background:#f8fafc;"><h3>4. ë¯¸ì§€ì˜ ì°½ (Unknown)</h3>${windows.unknown.slice(0, 5).join(', ')}...</div>
                        </div>
                        <div style="font-size:12px; color:#999; text-align:center; margin-top:40px;">Â© 2025 Paran Lab.</div>
                    </body>
                    </html>
                `;
                const blob = new Blob([htmlContent], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `johari_window_${new Date().getTime()}.html`;
                a.click();
            };

            return (
                <div className="animate-in fade-in duration-500">
                    {step === 1 && (
                        <div className="space-y-8">
                            <div className="bg-white p-10 rounded-[3rem] shadow-2xl border border-slate-100">
                                <h2 className="text-3xl font-black text-slate-900 mb-4 text-center">ë‚˜ë¥¼ í‘œí˜„í•˜ëŠ” ë‹¨ì–´ ì„ íƒ</h2>
                                <p className="text-slate-500 mb-10 text-center font-medium">ë¨¼ì € <span className="text-blue-600 font-bold">ë‚´ê°€ ìƒê°í•˜ëŠ” ë‚˜ì˜ ëª¨ìŠµ</span>ì„ ëª¨ë‘ ê³ ë¥´ì„¸ìš”.</p>
                                <div className="flex flex-wrap gap-2 justify-center mb-12">
                                    {traits.map(t => (
                                        <button key={t} onClick={()=>toggleSelf(t)} className={`px-4 py-2 rounded-full text-sm font-bold transition-all ${selectedSelf.includes(t) ? 'bg-blue-600 text-white shadow-lg' : 'bg-slate-100 text-slate-400 hover:bg-slate-200'}`}>
                                            {t}
                                        </button>
                                    ))}
                                </div>

                                <p className="text-slate-500 mb-10 text-center font-medium">ë‹¤ìŒìœ¼ë¡œ <span className="text-rose-600 font-bold">íƒ€ì¸ì´ ë‚˜ì—ê²Œ ìì£¼ ë§í•˜ëŠ” ëª¨ìŠµ</span>ì„ ê³ ë¥´ì„¸ìš”.</p>
                                <div className="flex flex-wrap gap-2 justify-center">
                                    {traits.map(t => (
                                        <button key={t} onClick={()=>toggleOthers(t)} className={`px-4 py-2 rounded-full text-sm font-bold transition-all ${selectedOthers.includes(t) ? 'bg-rose-600 text-white shadow-lg' : 'bg-slate-100 text-slate-400 hover:bg-slate-200'}`}>
                                            {t}
                                        </button>
                                    ))}
                                </div>
                                <button onClick={()=>setStep(2)} className="w-full mt-12 py-6 bg-slate-900 text-white rounded-[2rem] font-black text-xl shadow-xl">ë¶„ì„ ê²°ê³¼ ë³´ê¸°</button>
                            </div>
                        </div>
                    )}

                    {step === 2 && (
                        <div className="space-y-8">
                            <div className="bg-white p-10 rounded-[3rem] shadow-2xl border border-slate-100">
                                <h2 className="text-3xl font-black text-slate-900 mb-10 text-center">ì¡°í•˜ë¦¬ì˜ ì°½ ë¶„ì„ ê²°ê³¼</h2>
                                <div className="johari-grid">
                                    <div className="p-6 bg-blue-50 rounded-[2rem] border-2 border-blue-100">
                                        <h3 className="text-blue-700 font-black mb-2">1. ì—´ë¦° ì°½ (Open)</h3>
                                        <p className="text-[10px] text-blue-400 font-bold mb-4 uppercase">ë‚˜ë„ ì•Œê³  ë‚¨ë„ ì•„ëŠ” ë‚˜ì˜ ëª¨ìŠµ</p>
                                        <div className="flex flex-wrap gap-2">
                                            {windows.open.map(t => <span key={t} className="px-3 py-1 bg-white text-blue-600 rounded-full text-xs font-bold shadow-sm">{t}</span>)}
                                        </div>
                                    </div>
                                    <div className="p-6 bg-rose-50 rounded-[2rem] border-2 border-rose-100">
                                        <h3 className="text-rose-700 font-black mb-2">2. ëˆˆë¨¼ ì°½ (Blind)</h3>
                                        <p className="text-[10px] text-rose-400 font-bold mb-4 uppercase">ë‚¨ì€ ì•„ëŠ”ë° ë‚˜ëŠ” ëª¨ë¥´ëŠ” ëª¨ìŠµ</p>
                                        <div className="flex flex-wrap gap-2">
                                            {windows.blind.map(t => <span key={t} className="px-3 py-1 bg-white text-rose-600 rounded-full text-xs font-bold shadow-sm">{t}</span>)}
                                        </div>
                                    </div>
                                    <div className="p-6 bg-emerald-50 rounded-[2rem] border-2 border-emerald-100">
                                        <h3 className="text-emerald-700 font-black mb-2">3. ìˆ¨ê²¨ì§„ ì°½ (Hidden)</h3>
                                        <p className="text-[10px] text-emerald-400 font-bold mb-4 uppercase">ë‚˜ë§Œ ì•Œê³  ë‚¨ì€ ëª¨ë¥´ëŠ” ëª¨ìŠµ</p>
                                        <div className="flex flex-wrap gap-2">
                                            {windows.hidden.map(t => <span key={t} className="px-3 py-1 bg-white text-emerald-600 rounded-full text-xs font-bold shadow-sm">{t}</span>)}
                                        </div>
                                    </div>
                                    <div className="p-6 bg-slate-50 rounded-[2rem] border-2 border-slate-100">
                                        <h3 className="text-slate-700 font-black mb-2">4. ë¯¸ì§€ì˜ ì°½ (Unknown)</h3>
                                        <p className="text-[10px] text-slate-400 font-bold mb-4 uppercase">ë‚˜ë„ ë‚¨ë„ ì•„ì§ ëª¨ë¥´ëŠ” ì ì¬ë ¥</p>
                                        <p className="text-xs text-slate-400 italic">ì•„ì§ ë°œê²¬ë˜ì§€ ì•Šì€ ë‹¹ì‹ ì˜ ê°€ëŠ¥ì„±ì…ë‹ˆë‹¤.</p>
                                    </div>
                                </div>
                            </div>
                            <div className="grid grid-cols-1 gap-4">
                                <button onClick={saveAsHtml} className="py-6 bg-slate-900 text-white rounded-[2rem] font-black text-xl shadow-xl">ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ (.html)</button>
                                <button onClick={()=>setStep(1)} className="py-6 bg-slate-100 text-slate-400 rounded-[2rem] font-black text-xl">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('johari-app')).render(<JohariApp />);
    </script>
</body>
</html>
