<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—¬ì„¯ ìƒ‰ê¹” ëª¨ì ì‚¬ê³ ë²• | íŒŒë€ë©</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/core.js" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;900&display=swap');
        body { font-family: 'Pretendard', sans-serif; }
        .hat-card { transition: all 0.3s ease; }
        .hat-active { transform: scale(1.05); z-index: 10; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root">
        <div id="hats-app" class="max-w-4xl mx-auto py-10 px-4"></div>
    </div>

    <script type="text/babel">
        const { useState } = React;

        function HatsApp() {
            const [step, setStep] = useState(1); // 1: ì£¼ì œ, 2: ëª¨ìë³„ ì…ë ¥, 3: ê²°ê³¼
            const [subject, setSubject] = useState("");
            const [data, setData] = useState({
                white: "", red: "", black: "", yellow: "", green: "", blue: ""
            });

            const hats = [
                { id: 'white', name: 'í•˜ì–€ ëª¨ì', role: 'ê°ê´€ì  ì‚¬ì‹¤', q: 'í˜„ì¬ ì•Œê³  ìˆëŠ” ì •ë³´ì™€ ë°ì´í„°ëŠ” ë¬´ì—‡ì¸ê°€ìš”?', color: 'bg-white', border: 'border-slate-200', text: 'text-slate-600', icon: 'âšª' },
                { id: 'red', name: 'ë¹¨ê°„ ëª¨ì', role: 'ì§ê´€ê³¼ ê°ì •', q: 'ì´ ì£¼ì œì— ëŒ€í•´ ëŠë¼ëŠ” ì†”ì§í•œ ê¸°ë¶„ì€ ì–´ë–¤ê°€ìš”?', color: 'bg-red-500', border: 'border-red-600', text: 'text-white', icon: 'ğŸ”´' },
                { id: 'black', name: 'ê²€ì€ ëª¨ì', role: 'ë¹„íŒê³¼ ìœ„í—˜', q: 'ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œì ì´ë‚˜ ë¦¬ìŠ¤í¬ëŠ” ë¬´ì—‡ì¸ê°€ìš”?', color: 'bg-slate-800', border: 'border-slate-900', text: 'text-white', icon: 'âš«' },
                { id: 'yellow', name: 'ë…¸ë€ ëª¨ì', role: 'ë‚™ê´€ê³¼ ì´ìµ', q: 'ì´ ì¼ì„ í–ˆì„ ë•Œ ì–»ê²Œ ë˜ëŠ” ê¸ì •ì ì¸ íš¨ê³¼ëŠ”?', color: 'bg-amber-400', border: 'border-amber-500', text: 'text-slate-900', icon: 'ğŸŸ¡' },
                { id: 'green', name: 'ì´ˆë¡ ëª¨ì', role: 'ì°½ì˜ì™€ ëŒ€ì•ˆ', q: 'ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë‚˜ í•´ê²°ì±…ì´ ìˆì„ê¹Œìš”?', color: 'bg-emerald-500', border: 'border-emerald-600', text: 'text-white', icon: 'ğŸŸ¢' },
                { id: 'blue', name: 'íŒŒë€ ëª¨ì', role: 'ì¡°ì ˆê³¼ ê²°ë¡ ', q: 'ì „ì²´ì ì¸ ìƒê°ì„ ì •ë¦¬í•˜ê³  ë‹¤ìŒ í–‰ë™ì„ ì •í•œë‹¤ë©´?', color: 'bg-blue-600', border: 'border-blue-700', text: 'text-white', icon: 'ğŸ”µ' }
            ];

            const saveAsHtml = () => {
                const htmlContent = `
                    <!DOCTYPE html>
                    <html>
                    <head><meta charset="UTF-8"><title>ì—¬ì„¯ ìƒ‰ê¹” ëª¨ì ë³´ê³ ì„œ</title><style>body{font-family:sans-serif;padding:40px;max-width:700px;margin:0 auto;}h1{border-bottom:4px solid #2563eb;padding-bottom:10px;}.box{padding:20px;border-radius:15px;margin-bottom:10px;border:1px solid #eee;}</style></head>
                    <body>
                        <h1>ğŸ© ì—¬ì„¯ ìƒ‰ê¹” ëª¨ì ì‚¬ê³  ë³´ê³ ì„œ</h1>
                        <p><strong>ì£¼ì œ:</strong> ${subject}</p>
                        <div style="margin-top:20px;">
                            ${hats.map(h => `<div class="box"><strong>${h.name} (${h.role}):</strong><br>${data[h.id] || "ì˜ê²¬ ì—†ìŒ"}</div>`).join('')}
                        </div>
                        <div style="font-size:12px; color:#999; text-align:center; margin-top:40px;">Â© 2025 Paran Lab.</div>
                    </body>
                    </html>
                `;
                const blob = new Blob([htmlContent], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `6hats_report_${new Date().getTime()}.html`;
                a.click();
            };

            const copyToClipboard = () => {
                const text = `[íŒŒë€ë© ì—¬ì„¯ ìƒ‰ê¹” ëª¨ì ë³´ê³ ì„œ]\nì£¼ì œ: ${subject}\n\n` +
                    hats.map(h => `${h.name}: ${data[h.id]}`).join('\n') +
                    `\n\në‹¤ê°ë„ë¡œ ìƒê°í•˜ê³  ê²°ì •í•˜ì„¸ìš”. íŒŒë€ë©(paranlab.com)`;
                navigator.clipboard.writeText(text).then(() => alert("ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!"));
            };

            return (
                <div className="animate-in fade-in duration-500">
                    {/* STEP 1: ì£¼ì œ ì„¤ì • */}
                    {step === 1 && (
                        <div className="bg-white p-10 rounded-[3rem] shadow-2xl border border-slate-100 max-w-2xl mx-auto">
                            <h2 className="text-3xl font-black text-slate-900 mb-4">ì–´ë–¤ ê³ ë¯¼ì„ ë‹¤ê°ë„ë¡œ ë¶„ì„í• ê¹Œìš”?</h2>
                            <p className="text-slate-500 mb-10 font-medium">í•´ê²°í•˜ê³  ì‹¶ì€ ë¬¸ì œë‚˜ ê²€í† ê°€ í•„ìš”í•œ ì•„ì´ë””ì–´ë¥¼ ì ì–´ì£¼ì„¸ìš”.</p>
                            <input value={subject} onChange={(e)=>setSubject(e.target.value)} placeholder="ì˜ˆ: ì´ë²ˆ ì—¬ë¦„ íœ´ê°€ ê³„íš, ìƒˆë¡œìš´ ë¶€ì—… ì‹œì‘í•˜ê¸°" className="w-full p-6 bg-slate-50 border-4 border-transparent focus:border-blue-500 rounded-[2rem] outline-none text-xl font-black transition-all" />
                            <button onClick={()=>setStep(2)} className="w-full mt-10 py-6 bg-blue-600 text-white rounded-[2rem] font-black text-xl shadow-xl shadow-blue-200">ë¶„ì„ ì‹œì‘í•˜ê¸°</button>
                        </div>
                    )}

                    {/* STEP 2: ëª¨ìë³„ ì…ë ¥ */}
                    {step === 2 && (
                        <div className="space-y-8">
                            <div className="bg-white p-8 rounded-[3rem] shadow-2xl border border-slate-100">
                                <h2 className="text-2xl font-black text-slate-900 mb-2">ëª¨ìë¥¼ ë°”ê¿”ê°€ë©° ìƒê°í•´ë³´ì„¸ìš”</h2>
                                <p className="text-slate-500 mb-10 font-medium">ì£¼ì œ: <span className="text-blue-600 font-black">{subject}</span></p>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    {hats.map((h) => (
                                        <div key={h.id} className={`p-6 rounded-[2.5rem] border-2 ${h.color} ${h.border} ${h.text} shadow-sm hat-card`}>
                                            <div className="flex items-center gap-2 mb-4">
                                                <span className="text-2xl">{h.icon}</span>
                                                <div>
                                                    <h3 className="font-black leading-tight">{h.name}</h3>
                                                    <p className="text-[10px] opacity-80 font-bold uppercase tracking-widest">{h.role}</p>
                                                </div>
                                            </div>
                                            <p className="text-xs mb-4 font-bold opacity-90">{h.q}</p>
                                            <textarea 
                                                value={data[h.id]} 
                                                onChange={(e)=>setData({...data, [h.id]: e.target.value})}
                                                placeholder="ì—¬ê¸°ì— ì ì–´ë³´ì„¸ìš”..."
                                                className="w-full h-32 bg-white/20 rounded-2xl p-4 outline-none focus:ring-4 ring-white/30 resize-none text-sm font-medium placeholder:text-current placeholder:opacity-50"
                                            />
                                        </div>
                                    ))}
                                </div>
                            </div>
                            <div className="flex gap-4">
                                <button onClick={()=>setStep(1)} className="flex-1 py-6 bg-slate-100 text-slate-400 rounded-[2rem] font-black text-xl">ì´ì „</button>
                                <button onClick={()=>setStep(3)} className="flex-1 py-6 bg-blue-600 text-white rounded-[2rem] font-black text-xl shadow-xl shadow-blue-200">ê²°ê³¼ ë³´ê³ ì„œ ë³´ê¸°</button>
                            </div>
                        </div>
                    )}

                    {/* STEP 3: ê²°ê³¼ ë¦¬í¬íŠ¸ */}
                    {step === 3 && (
                        <div className="bg-white p-10 rounded-[3rem] shadow-2xl border border-slate-100 text-center">
                            <h2 className="text-4xl font-black text-slate-900 mb-2 text-blue-600">ì‚¬ê³  ë¶„ì„ ë¦¬í¬íŠ¸</h2>
                            <p className="text-slate-500 mb-12 font-medium">6ê°€ì§€ ê´€ì ì—ì„œ ì •ë¦¬ëœ ë‹¹ì‹ ì˜ ìƒê°ì…ë‹ˆë‹¤.</p>
                            
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12 text-left">
                                {hats.map((h) => (
                                    <div key={h.id} className={`p-6 rounded-3xl border-2 ${h.border} bg-slate-50`}>
                                        <div className="flex items-center gap-2 mb-3">
                                            <span>{h.icon}</span>
                                            <h4 className="font-black text-slate-800">{h.name}</h4>
                                        </div>
                                        <p className="text-slate-600 text-sm font-medium leading-relaxed">
                                            {data[h.id] || <span className="text-slate-300 italic">ì‘ì„±ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.</span>}
                                        </p>
                                    </div>
                                ))}
                            </div>

                            <div className="grid grid-cols-1 gap-4">
                                <button onClick={saveAsHtml} className="py-6 bg-slate-900 text-white rounded-[2rem] font-black text-xl shadow-xl">ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ (.html)</button>
                                <button onClick={copyToClipboard} className="py-6 bg-blue-600 text-white rounded-[2rem] font-black text-xl shadow-xl">í…ìŠ¤íŠ¸ ê²°ê³¼ ë³µì‚¬í•˜ê¸°</button>
                                <button onClick={()=>setStep(2)} className="py-6 bg-slate-100 text-slate-400 rounded-[2rem] font-black text-xl">ë‹¤ì‹œ ìˆ˜ì •í•˜ê¸°</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('hats-app')).render(<HatsApp />);
    </script>
</body>
</html>
