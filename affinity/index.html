<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- [SEO 표준] -->
    <title>친화도법 도구 | 아이디어 그룹화 및 KJ법 분석 | 파란랩(Paran Lab)</title>
    <meta name="description" content="흩어진 아이디어를 유사성에 따라 그룹화하여 핵심 통찰을 도출하세요. 가와키타 지로의 KJ법을 바탕으로 복잡한 정보를 과학적으로 정리하고 전략적 우선순위를 수립합니다.">
    <meta name="keywords" content="친화도법, AffinityDiagram, KJ법, 가와키타지로, 아이디어정리, 브레인스토밍, 정보구조화, 파란랩, 의사결정과학">
    <meta property="og:title" content="파란랩 친화도법 분석 엔진 v7.8.3">
    <meta property="og:description" content="무질서한 아이디어 속에서 질서를 찾으세요. KJ법 기반의 과학적 그룹화 도구.">
    <meta property="og:type" content="website">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>📎</text></svg>">
    
    <!-- [구조화 데이터 표준] -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "파란랩 친화도법 분석 엔진",
      "operatingSystem": "All",
      "applicationCategory": "BusinessApplication",
      "description": "파편화된 아이디어들을 유사성에 따라 그룹화하여 핵심 테마를 도출하는 KJ법 기반 분석 도구",
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "KRW" }
    }
    </script>

    <!-- 라이브러리 로드 -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="/core.js" defer></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;900&display=swap');
        body { font-family: 'Pretendard', sans-serif; background-color: #f8fafc; margin: 0; overflow-x: hidden; }
        .step-active { color: #2563eb; border-bottom: 4px solid #2563eb; }
        .sticky-note { border-left: 8px solid #3b82f6; transition: all 0.3s ease; }
        .sticky-note:hover { transform: translateY(-2px); }
        @media print { .no-print { display: none; } }
        .break-keep { word-break: keep-all; }
    </style>
</head>
<body>
    <div id="header-root"></div>
    <div id="root"></div>
    <div id="footer-root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // [v7.8.3] 기본 샘플 데이터
        const DEFAULT_TOOL_SAMPLE = {
            subject: "우리 팀의 소통 활성화 방안",
            ideas: ["매주 금요일 티타임", "슬랙 채널 정리", "익명 건의함 설치", "월 1회 회식", "업무 공유 툴 도입", "칭찬 릴레이"],
            groups: { 0: "오프라인 모임", 1: "디지털 도구", 2: "심리적 안전감", 3: "오프라인 모임", 4: "디지털 도구", 5: "심리적 안전감" },
            isDefault: true
        };

        function AffinityApp() {
            const [isLoaded, setIsLoaded] = useState(false);
            const [isSharing, setIsSharing] = useState(false);
            const [step, setStep] = useState(4); // 결과 우선 노출
            const [data, setData] = useState(DEFAULT_TOOL_SAMPLE);

            // [v7.8.3] 데이터 로드 및 시나리오 연동
            useEffect(() => {
                const timer = setTimeout(() => {
                    try {
                        const saved = localStorage.getItem('paranlab-affinity');
                        if (saved) {
                            const parsed = JSON.parse(saved);
                            setData({ ...parsed, isDefault: false });
                        } else {
                            setData(DEFAULT_TOOL_SAMPLE);
                        }
                    } catch (e) { console.error("Init Error:", e); }
                    setIsLoaded(true);
                }, 500);
                return () => clearTimeout(timer);
            }, []);

            useEffect(() => {
                if (isLoaded && !data.isDefault) {
                    localStorage.setItem('paranlab-affinity', JSON.stringify(data));
                }
            }, [data, isLoaded]);

            const handleShare = async () => {
                const element = document.getElementById('report-card');
                if (!element) return;
                setIsSharing(true);
                try {
                    const canvas = await html2canvas(element, { scale: 2, useCORS: true });
                    canvas.toBlob(async (blob) => {
                        const file = new File([blob], 'affinity-report.png', { type: 'image/png' });
                        if (navigator.canShare && navigator.canShare({ files: [file] })) {
                            await navigator.share({ files: [file], text: `[파란랩] 친화도법 분석 결과: ${data.subject}` });
                        } else {
                            const link = document.createElement('a');
                            link.download = 'affinity-report.png';
                            link.href = canvas.toDataURL();
                            link.click();
                        }
                        setIsSharing(false);
                    }, 'image/png');
                } catch (err) { setIsSharing(false); }
            };

            // [원본 로직 보존] 그룹화 연산
            const groupedData = useMemo(() => {
                const res = {};
                data.ideas.forEach((idea, i) => {
                    if (!idea || !idea.trim()) return;
                    const g = data.groups[i] || "미분류";
                    if (!res[g]) res[g] = [];
                    res[g].push(idea);
                });
                return res;
            }, [data.ideas, data.groups]);

            if (!isLoaded) return null;

            return (
                <main className="max-w-5xl mx-auto py-12 px-4 animate-in fade-in duration-700">
                    {/* [v7.8.3] 마스터 컨트롤 바 */}
                    <div className="flex flex-col md:flex-row justify-between items-center gap-4 mb-12 no-print bg-slate-900 p-6 rounded-[2.5rem] shadow-2xl">
                        <div className="flex gap-4 w-full md:w-auto">
                            <button onClick={() => setStep(1)} className="flex-1 md:flex-none px-6 md:px-10 py-4 bg-blue-600 text-white rounded-2xl font-black text-sm md:text-lg shadow-xl hover:bg-blue-500 transition-all break-keep">✏️ 데이터 수정</button>
                            <button onClick={() => {localStorage.removeItem('paranlab-affinity'); location.reload();}} className="flex-1 md:flex-none px-6 md:px-10 py-4 bg-red-600 text-white rounded-2xl font-black text-sm md:text-lg shadow-xl hover:bg-red-500 transition-all break-keep">🔄 새로 시작</button>
                        </div>
                        <div className="text-right hidden md:block text-white">
                            <p className="text-blue-400 font-black text-xs tracking-widest uppercase">Information Science</p>
                            <p className="font-bold text-sm">PARAN LAB AFFINITY v7.8.3</p>
                        </div>
                    </div>

                    {/* 위저드 네비게이션 */}
                    <nav className="flex justify-center gap-4 md:gap-12 mb-12 no-print border-b-2 border-slate-200 overflow-x-auto pb-4 scrollbar-hide">
                        {['주제 정의', '아이디어 입력', '그룹화 작업', '최종 리포트'].map((name, i) => (
                            <div key={i} className={`whitespace-nowrap pb-2 text-xs md:text-sm font-black transition-all ${step === i + 1 ? 'step-active' : 'text-slate-300'}`}>
                                {i + 1}. {name}
                            </div>
                        ))}
                    </nav>

                    {/* 상단 광고 영역 */}
                    <div className="mb-12 no-print flex justify-center min-h-[100px] bg-slate-100 rounded-2xl items-center text-slate-400 text-[10px] font-bold uppercase tracking-widest border border-dashed border-slate-200">
                        ADVERTISEMENT
                    </div>

                    <div id="report-card" className="bg-white p-6 md:p-16 rounded-[2.5rem] md:rounded-[3.5rem] shadow-2xl border border-slate-100 relative overflow-hidden">
                        {/* 시나리오 배지 */}
                        {(data.scenarioContext || data.isDefault) && step === 4 && (
                            <div className="absolute top-4 right-4 md:top-8 md:right-8 no-print">
                                <span className="bg-blue-600 text-white px-4 py-1 md:px-6 md:py-2 rounded-full text-[10px] md:text-xs font-black animate-bounce shadow-lg">
                                    💡 {data.scenarioContext ? `시나리오: ${data.scenarioContext.title}` : "도구 샘플 데이터 적용됨"}
                                </span>
                            </div>
                        )}

                        {step === 1 && (
                            <div className="animate-in fade-in space-y-8">
                                <h2 className="text-2xl md:text-4xl font-black text-slate-900 text-center">정리하고 싶은 주제를 입력하세요</h2>
                                <input type="text" value={data.subject} onChange={e => setData({...data, subject: e.target.value, isDefault: false})} className="w-full p-6 md:p-8 bg-slate-50 rounded-[2rem] md:rounded-[2.5rem] border-none outline-none text-xl md:text-3xl font-black text-center shadow-inner focus:ring-4 ring-blue-200 transition-all" placeholder="예: 우리 팀의 소통 활성화 방안" />
                                <button onClick={() => setStep(2)} className="w-full py-6 bg-blue-600 text-white rounded-[2rem] font-black text-xl shadow-2xl hover:bg-blue-700 transition-all">다음 단계</button>
                            </div>
                        )}

                        {step === 2 && (
                            <div className="animate-in fade-in space-y-8">
                                <h2 className="text-2xl md:text-4xl font-black text-slate-900 text-center">생각나는 모든 아이디어를 적으세요</h2>
                                <div className="grid grid-cols-1 gap-4">
                                    {data.ideas.map((idea, i) => (
                                        <div key={i} className="flex gap-2 md:gap-4">
                                            <input type="text" value={idea} onChange={e => { const n = [...data.ideas]; n[i] = e.target.value; setData({...data, ideas: n, isDefault: false}); }} className="flex-1 p-4 md:p-6 bg-slate-50 rounded-2xl font-bold shadow-inner text-base md:text-lg" placeholder={`아이디어 ${i+1}`} />
                                            <button onClick={() => setData({...data, ideas: data.ideas.filter((_, idx) => idx !== i), isDefault: false})} className="px-4 md:px-6 text-red-400 font-black hover:text-red-600 transition-colors text-sm md:text-base">삭제</button>
                                        </div>
                                    ))}
                                </div>
                                <button onClick={() => setData({...data, ideas: [...data.ideas, ""], isDefault: false})} className="w-full py-4 border-2 border-dashed border-slate-200 rounded-2xl text-slate-400 font-black hover:bg-slate-50 transition-all">+ 아이디어 추가</button>
                                <div className="flex gap-4 md:gap-6"><button onClick={() => setStep(1)} className="flex-1 py-6 bg-slate-100 text-slate-600 rounded-[2rem] font-black text-lg">이전</button><button onClick={() => setStep(3)} className="flex-[2] py-6 bg-blue-600 text-white rounded-[2rem] font-black text-xl shadow-2xl hover:bg-blue-700 transition-all">다음</button></div>
                            </div>
                        )}

                        {step === 3 && (
                            <div className="animate-in fade-in space-y-8">
                                <h2 className="text-2xl md:text-4xl font-black text-slate-900 text-center">유사한 아이디어끼리 묶어주세요</h2>
                                <p className="text-center text-slate-500 font-medium break-keep">각 아이디어에 어울리는 그룹명을 입력하세요. 같은 이름을 쓰면 자동으로 묶입니다.</p>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                                    {data.ideas.map((idea, i) => idea && idea.trim() && (
                                        <div key={i} className="p-6 bg-white rounded-[2rem] border-2 border-slate-100 shadow-sm sticky-note">
                                            <p className="text-slate-800 font-bold mb-4 text-base md:text-lg">"{idea}"</p>
                                            <input type="text" value={data.groups[i] || ""} onChange={e => setData({...data, groups: {...data.groups, [i]: e.target.value}, isDefault: false})} className="w-full p-4 bg-blue-50 rounded-xl font-black text-blue-600 focus:ring-2 ring-blue-200 outline-none transition-all text-sm md:text-base" placeholder="그룹명 입력 (예: 디지털 도구)" />
                                        </div>
                                    ))}
                                </div>
                                <div className="flex gap-4 md:gap-6"><button onClick={() => setStep(2)} className="flex-1 py-6 bg-slate-100 text-slate-600 rounded-[2rem] font-black text-lg">이전</button><button onClick={() => setStep(4)} className="flex-[2] py-6 bg-blue-600 text-white rounded-[2rem] font-black text-xl shadow-2xl hover:bg-blue-700 transition-all">최종 리포트 생성</button></div>
                            </div>
                        )}

                        {step === 4 && (
                            <div className="animate-in zoom-in duration-700">
                                <div className="text-center mb-12 md:mb-16">
                                    <span className="bg-blue-100 text-blue-700 px-6 md:px-8 py-2 rounded-full text-[10px] md:text-xs font-black uppercase tracking-widest">Affinity Diagram Analysis Report</span>
                                    <h2 className="text-3xl md:text-5xl font-black text-slate-900 mt-6 md:mt-8 tracking-tight break-keep">아이디어 그룹화 리포트</h2>
                                    <p className="mt-4 text-slate-400 font-bold text-lg md:text-xl break-keep">주제: {data.subject}</p>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mb-12">
                                    {Object.keys(groupedData).map((groupName, i) => (
                                        <div key={i} className="p-8 md:p-10 bg-slate-50 rounded-[2.5rem] md:rounded-[3.5rem] border border-slate-100 shadow-sm relative overflow-hidden">
                                            <div className="absolute -top-4 -right-4 text-6xl opacity-5 font-black text-blue-600">#{i+1}</div>
                                            <h3 className="font-black text-blue-600 mb-6 text-xl flex items-center gap-2">📌 {groupName}</h3>
                                            <ul className="space-y-4">
                                                {groupedData[groupName].map((item, j) => (
                                                    <li key={j} className="flex items-start gap-3 text-slate-700 font-bold leading-relaxed text-base md:text-lg">
                                                        <span className="w-1.5 h-1.5 bg-blue-400 rounded-full mt-2.5 shrink-0"></span>
                                                        <span className="break-keep">{item}</span>
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>
                                    ))}
                                </div>
                                <div className="p-8 md:p-12 bg-slate-900 text-white rounded-[3rem] md:rounded-[4rem] shadow-2xl text-center relative overflow-hidden">
                                    <div className="absolute top-0 left-0 p-10 opacity-10 text-9xl font-black">💡</div>
                                    <h3 className="text-xl md:text-2xl font-black mb-4">전략적 시사점</h3>
                                    <p className="text-base md:text-lg text-slate-300 leading-relaxed font-medium max-w-3xl mx-auto break-keep">
                                        그룹화된 테마들은 우리 팀이 집중해야 할 핵심 영역을 보여줍니다. 각 그룹의 우선순위를 정하고 구체적인 실행 계획(Action Plan)으로 연결하십시오.
                                    </p>
                                </div>
                            </div>
                        )}
                    </div>

                    {/* 하단 광고 영역 */}
                    <div className="mt-12 no-print flex justify-center min-h-[100px] bg-slate-100 rounded-2xl items-center text-slate-400 text-[10px] font-bold uppercase tracking-widest border border-dashed border-slate-200">
                        ADVERTISEMENT
                    </div>

                    {/* 액션 버튼 세트 (모바일 2x2 그리드 적용) */}
                    {step === 4 && (
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mt-12 no-print">
                            <button onClick={() => window.ParanLabCore.saveAsImage('report-card')} className="h-[64px] md:h-auto py-4 md:py-7 bg-slate-900 text-white rounded-2xl md:rounded-[2.5rem] font-black text-[13px] md:text-lg shadow-2xl hover:bg-slate-800 transition-all break-keep">🖼️ 이미지 저장</button>
                            <button onClick={() => window.ParanLabCore.downloadHTML('report-card')} className="h-[64px] md:h-auto py-4 md:py-7 bg-blue-600 text-white rounded-2xl md:rounded-[2.5rem] font-black text-[13px] md:text-lg shadow-2xl hover:bg-blue-700 transition-all break-keep">📄 HTML 다운</button>
                            <button onClick={handleShare} disabled={isSharing} className="h-[64px] md:h-auto py-4 md:py-7 bg-yellow-500 text-slate-900 rounded-2xl md:rounded-[2.5rem] font-black text-[13px] md:text-lg shadow-2xl flex items-center justify-center gap-1 break-keep">{isSharing ? '⌛ 생성중' : '💬 결과 공유'}</button>
                            <button onClick={() => window.ParanLabCore.copyToClipboard(window.location.href)} className="h-[64px] md:h-auto py-4 md:py-7 bg-emerald-600 text-white rounded-2xl md:rounded-[2.5rem] font-black text-[13px] md:text-lg shadow-2xl hover:bg-emerald-700 transition-all break-keep">🔗 링크 복사</button>
                        </div>
                    )}

                    {/* [v7.8.3] 학술적 배경 및 실전 가이드 (1,000자 이상) */}
                    <section className="mt-40 border-t-4 border-slate-200 pt-24">
                        <article className="prose prose-slate max-w-none">
                            <h1 className="text-3xl md:text-5xl font-black text-slate-900 mb-12">친화도법(Affinity Diagram): 복잡한 정보를 구조화하는 KJ법의 과학</h1>
                            
                            <div className="space-y-12 text-lg md:text-xl text-slate-600 leading-relaxed">
                                <section>
                                    <h2 className="text-2xl md:text-3xl font-black text-slate-800 mb-6">1. 친화도법이란 무엇인가?</h2>
                                    <p>
                                        <strong>친화도법(Affinity Diagram)</strong>은 방대한 양의 아이디어나 데이터를 유사성에 따라 그룹화하여 문제의 본질을 파악하는 창의적 사고 도구입니다. 이 기법은 1960년대 일본의 인류학자 <strong>가와키타 지로(Jiro Kawakita)</strong>에 의해 개발되었으며, 그의 이름을 따서 <strong>KJ법</strong>이라고도 불립니다.
                                    </p>
                                    <p>
                                        친화도법의 핵심은 '상향식(Bottom-up)' 정리입니다. 미리 정해진 카테고리에 데이터를 끼워 맞추는 것이 아니라, 데이터들 사이의 자연스러운 연관성을 찾아내어 새로운 카테고리를 생성합니다. 이를 통해 고정관념에서 벗어나 문제에 대한 새로운 통찰을 얻을 수 있습니다.
                                    </p>
                                </section>

                                <section className="bg-blue-50 p-8 md:p-12 rounded-[3rem] border-2 border-blue-100">
                                    <h2 className="text-2xl md:text-3xl font-black text-blue-900 mb-6">2. 친화도법의 4단계 프로세스</h2>
                                    <ul className="space-y-6">
                                        <li><strong>단계 1: 아이디어 도출</strong> - 주제와 관련된 모든 생각, 데이터, 의견을 카드(포스트잇)에 기록합니다. 비판 없이 최대한 많은 양을 뽑아내는 것이 중요합니다.</li>
                                        <li><strong>단계 2: 유사성 그룹화</strong> - 카드들을 훑어보며 서로 '친한' 것들끼리 모읍니다. 논리적인 분류가 아니라 직관적인 유사성을 따릅니다.</li>
                                        <li><strong>단계 3: 그룹 명명(Labeling)</strong> - 각 그룹의 핵심 내용을 관통하는 이름을 붙입니다. 이 이름은 그룹 내 모든 카드를 대변할 수 있어야 합니다.</li>
                                        <li><strong>단계 4: 전체 구조 파악</strong> - 그룹 간의 관계를 살피며 문제의 전체적인 지형도를 그립니다. 이를 통해 핵심 과제를 도출합니다.</li>
                                    </ul>
                                </section>

                                <section>
                                    <h2 className="text-2xl md:text-3xl font-black text-slate-800 mb-6">3. 실전 활용 가이드: 언제 사용하나요?</h2>
                                    <p>
                                        친화도법은 정보가 너무 많아 어디서부터 손을 대야 할지 모를 때 가장 빛을 발합니다. 고객 인터뷰 결과 정리, 브레인스토밍 후속 작업, 복잡한 프로젝트의 요구사항 분석 등에 최적화되어 있습니다. 
                                    </p>
                                    <p>
                                        특히 팀 단위로 작업할 때, 각자의 파편화된 생각을 시각적으로 정렬함으로써 팀 전체의 합의(Consensus)를 이끌어내는 강력한 소통 도구가 됩니다. 파란랩의 친화도법 엔진은 이러한 아날로그적 경험을 디지털로 이식하여 빠르고 정확한 정보 구조화를 돕습니다.
                                    </p>
                                </section>

                                {/* [핵심 강화] 검증된 무료 외부 권위 사이트 연결 섹션 */}
                                <section className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <a href="https://en.wikipedia.org/wiki/Affinity_diagram" target="_blank" className="p-8 bg-white rounded-[2.5rem] border-2 border-slate-100 hover:border-blue-500 transition-all group shadow-sm">
                                        <h4 className="font-black text-xl mb-4 flex items-center gap-2">
                                            📚 위키백과: 친화도법 상세 정의 (무료)
                                            <span className="text-blue-500 group-hover:translate-x-1 transition-transform">→</span>
                                        </h4>
                                        <p className="text-base text-slate-500 font-medium">친화도법의 역사적 배경과 KJ법의 학술적 원리에 대한 상세한 정의를 확인하세요.</p>
                                    </a>
                                    <a href="https://www.interaction-design.org/literature/article/affinity-diagrams-learn-how-to-cluster-and-bundle-ideas-and-facts" target="_blank" className="p-8 bg-white rounded-[2.5rem] border-2 border-slate-100 hover:border-blue-500 transition-all group shadow-sm">
                                        <h4 className="font-black text-xl mb-4 flex items-center gap-2">
                                            🎨 IDF: 디자인 씽킹과 친화도법
                                            <span className="text-blue-500 group-hover:translate-x-1 transition-transform">→</span>
                                        </h4>
                                        <p className="text-base text-slate-500 font-medium">사용자 경험(UX) 디자인 분야에서 아이디어를 클러스터링하는 실무적인 방법론을 배워보세요.</p>
                                    </a>
                                </section>

                                <section className="mt-12 p-10 bg-slate-100 rounded-[3rem] border-2 border-slate-200">
                                    <h4 className="font-black mb-8 text-2xl text-slate-800">📚 주요 참고 문헌 (References)</h4>
                                    <ul className="text-base text-slate-500 space-y-4 font-medium">
                                        <li>• Kawakita, J. (1967). <em>The KJ Method: A Scientific Approach to Problem Solving</em>. Chuokoron-sha.</li>
                                        <li>• Tague, N. R. (2005). <em>The Quality Toolbox</em>. ASQ Quality Press.</li>
                                        <li>• Brassard, M. (1989). <em>The Memory Jogger Plus+</em>. GOAL/QPC.</li>
                                    </ul>
                                </section>
                            </div>
                        </article>
                    </section>
                    
                    {/* 패밀리 사이트 연결 (푸터 상단) */}
                    <div className="mt-20 py-12 border-t border-slate-200 text-center no-print">
                        <p className="text-slate-400 font-bold mb-4">더 날카로운 팩트 체크가 필요하다면?</p>
                        <a href="https://factbomber.kr" target="_blank" className="inline-flex items-center gap-2 px-8 py-4 bg-slate-900 text-white rounded-2xl font-black hover:bg-slate-800 transition-all shadow-lg">
                            🚀 팩트폭격연구소 바로가기
                        </a>
                    </div>
                </main>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(AffinityApp));
    </script>
</body>
</html>
